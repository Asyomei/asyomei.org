---
import { lastfmAction } from "#/backend/actions/lastfm"
import { me } from "#/urls"
import formatDate from "#/utils/format-date"
import A from "../A"
import BaseAction from "./BaseAction.astro"

const { artist, title, playing, url, date } = await lastfmAction()
---

<BaseAction title="last.fm" link={me.lastfm}>
  <p>{artist} - {title}</p>

  <div class="flex justify-between gap-4 pt-6">
    <p class="text-secondary">
      {playing ? "now playing" : `${formatDate(date, "%d.%m %H:%M")} UTC`}
    </p>
    <A href={url}>track on last.fm</A>
  </div>
</BaseAction>
