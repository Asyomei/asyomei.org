---
import ThemeSwitcher from "./dynamic/ThemeSwitcher"
import Link from "./Link"
import iconPixelHome from "../icons/pixel-home.svg?raw"
import iconPixelCode from "../icons/pixel-code.svg?raw"

const links = [
  {
    icon: iconPixelHome,
    title: "Главная",
    to: "/",
  },
  {
    icon: iconPixelCode,
    title: "Проекты",
    to: "/projects",
  },
]

const trimSlashes = (s: string) => s.replace(/^\/|\/$/g, "")

const current = trimSlashes(Astro.url.pathname)
const isActive = (to: string) => trimSlashes(to) === current
---

<menu class="fixed z-10 flex h-full w-min flex-col justify-between gap-6 bg-mantle p-2 align-top">
  <nav class="flex flex-col gap-4">
    {
      links.map(({ icon, title, to }) => (
        <Link {title} href={to} class:list={[isActive(to) && "text-accent"]}>
          <Fragment set:html={icon} />
        </Link>
      ))
    }
  </nav>
  <ThemeSwitcher client:only="solid-js" />
</menu>
