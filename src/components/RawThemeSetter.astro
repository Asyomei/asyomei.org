---
import { LIGHT_CSS, DARK_CSS } from "../utils/color-theme"

export const partial = true

const color = {
  light: LIGHT_CSS,
  dark: DARK_CSS,
}
---

<script is:inline define:vars={{ c: color }}>
  var styleNode = document.createElement("style")
  document.head.appendChild(styleNode)

  updateTheme = function () {
    var theme = localStorage.getItem("color-theme") || "browser"
    styleNode.innerHTML =
      theme === "browser" ? `${c.light}@media(prefers-color-scheme:dark){${c.dark}}` : c[theme]
  }
  updateTheme()
</script>
